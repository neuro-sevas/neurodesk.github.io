<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.94.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Troubleshooting | NeuroDesk</title><meta name=description content="Troubleshoot commit issue with Git
"><meta property="og:title" content="Troubleshooting"><meta property="og:description" content="Troubleshoot commit issue with Git
"><meta property="og:type" content="article"><meta property="og:url" content="https://www.neurodesk.org/developers/new_tools/troubleshooting/"><meta property="article:section" content="developers"><meta property="article:modified_time" content="2022-06-17T18:20:02+10:00"><meta property="og:site_name" content="NeuroDesk"><meta itemprop=name content="Troubleshooting"><meta itemprop=description content="Troubleshoot commit issue with Git
"><meta itemprop=dateModified content="2022-06-17T18:20:02+10:00"><meta itemprop=wordCount content="1465"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Troubleshooting"><meta name=twitter:description content="Troubleshoot commit issue with Git
"><link rel=preload href=/scss/main.min.8ae326e95d9c6881ebe419ebd82c6634a8ac6728b2415ccd672d345f03b4cb1b.css as=style><link href=/scss/main.min.8ae326e95d9c6881ebe419ebd82c6634a8ac6728b2415ccd672d345f03b4cb1b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script>
<link rel=stylesheet href=/css/prism.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-221108279-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">NeuroDesk</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/how-to-cite-us/><span>Cite</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/><span>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/faq/><span>FAQ</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/applications/><span>Applications</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/developers/><span class=active>Developers</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/tutorials/><span>Tutorials</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/NeuroDesk target=_blank><span>GitHub</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://twitter.com/neuro_desk target=_blank><span>News</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.14e404c11da196256c80a80393bf52fa.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.14e404c11da196256c80a80393bf52fa.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-developers-li><a href=/developers/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-developers><span>Developers</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developerscontributors-li><a href=/developers/contributors/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-developerscontributors><span>Contributors</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-developersarchitecture-li><a href=/developers/architecture/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-developersarchitecture><span>Architecture</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developersarchitecturerelease_process-li><a href=/developers/architecture/release_process/ title="Neurodesktop Release Process" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developersarchitecturerelease_process><span>Release Process</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developersarchitectureneurodesk-components-li><a href=/developers/architecture/neurodesk-components/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developersarchitectureneurodesk-components><span>Neurodesk Architecture</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developersarchitectureneurodesk-dev-li><a href=/developers/architecture/neurodesk-dev/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developersarchitectureneurodesk-dev><span>Neurodesktop Dev</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-developersdocumentation-li><a href=/developers/documentation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-developersdocumentation><span>Documentation</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developersdocumentationlocal-hugo-docsy-li><a href=/developers/documentation/local-hugo-docsy/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developersdocumentationlocal-hugo-docsy><span>Local Hugo Docsy</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-developersnew_tools-li><a href=/developers/new_tools/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-developersnew_tools><span>How to add new tools</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developersnew_toolscloning-li><a href=/developers/new_tools/cloning/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developersnew_toolscloning><span>Get Neurodesk code</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developersnew_toolsworkflow-li><a href=/developers/new_tools/workflow/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developersnew_toolsworkflow><span>Using Git</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developersnew_toolsadd_tool-li><a href=/developers/new_tools/add_tool/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developersnew_toolsadd_tool><span>Add tools</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developersnew_toolsfix_commit-li><a href=/developers/new_tools/fix_commit/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developersnew_toolsfix_commit><span>Fix commit</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developersnew_toolspull_request-li><a href=/developers/new_tools/pull_request/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developersnew_toolspull_request><span>Create a pull request</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-developersnew_toolstroubleshooting-li><a href=/developers/new_tools/troubleshooting/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-developersnew_toolstroubleshooting><span class=td-sidebar-nav-active-item>Troubleshooting</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developersnew_toolsmenu_entries-li><a href=/developers/new_tools/menu_entries/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developersnew_toolsmenu_entries><span>Menu entries</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developerstransparent_singularity-li><a href=/developers/transparent_singularity/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-developerstransparent_singularity><span>Transparent Singularity</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-developerscvmfs-li><a href=/developers/cvmfs/ title="Neurodesk CVMFS" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-developerscvmfs><span>CVMFS</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developerscvmfsproxy-li><a href=/developers/cvmfs/proxy/ title="Setup CVMFS Proxy" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developerscvmfsproxy><span>Proxy</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developerscvmfscvmfs_architecture-li><a href=/developers/cvmfs/cvmfs_architecture/ title="CVMFS architecture" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developerscvmfscvmfs_architecture><span>Setup</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developerscvmfsstratum0-li><a href=/developers/cvmfs/stratum0/ title="Setup Stratum 0 server" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developerscvmfsstratum0><span>Stratum 0</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-developerscvmfsstratum1-li><a href=/developers/cvmfs/stratum1/ title="Setup Stratum 1 server" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-developerscvmfsstratum1><span>Stratum 1</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/NeuroDesk/neurodesk.github.io/edit/hugo-docsy/content/en/developers/new_tools/troubleshooting.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/NeuroDesk/neurodesk.github.io/new/hugo-docsy/content/en/developers/new_tools/troubleshooting.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/NeuroDesk/neurodesk.github.io/issues/new?title=Troubleshooting" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/NeuroDesk/neurodesk.github.io/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
<a id=print href=https://www.neurodesk.org/developers/new_tools/_print/><i class="fa fa-print fa-fw"></i> Print entire section</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#undo-a-merge-commit>Undo a merge commit</a></li><li><a href=#restore-a-lost-commit>Restore a lost commit</a></li><li><a href=#recover-from-a-git-rebase-failure>Recover from a <code>git rebase</code> failure</a></li><li><a href=#working-from-multiple-computers>Working from multiple computers</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><h1>Troubleshooting</h1><div class=lead>Troubleshoot commit issue with Git</div><header class=article-meta></header><h2 id=undo-a-merge-commit>Undo a merge commit</h2><p>A merge commit is a special type of commit that has two parent commits. It&rsquo;s
created by Git when you merge one branch into another and the last commit on
your current branch is not a direct ancestor of the branch you are trying to
merge in. This happens quite often in a busy project like NeuroDesk where there are
many contributors because upstream/neurocontainer will have new commits while you&rsquo;re
working on a feature or bugfix. In order for Git to merge your changes and the
changes that have occurred on neurocontainer/upstream since you first started your work,
it must perform a three-way merge and create a merge commit.</p><p>neurocontainer uses a forked-repo, rebase-oriented workflow.</p><p>A merge commit is usually created when you&rsquo;ve run <code>git pull</code> or <code>git merge</code>.
You&rsquo;ll know you&rsquo;re creating a merge commit if you&rsquo;re prompted for a commit
message and the default is something like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Merge branch &#39;master&#39; of https://github.com/NeuroDesk/neurocontainer
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Please enter a commit message to explain why this merge is necessary,
</span></span><span style=display:flex><span># especially if it merges an updated upstream into a topic branch.
</span></span><span style=display:flex><span>#
</span></span><span style=display:flex><span># Lines starting with &#39;#&#39; will be ignored, and an empty message aborts
</span></span><span style=display:flex><span># the commit.
</span></span></code></pre></div><p>And the first entry for <code>git log</code> will show something like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#000;font-style:italic>commit e5f8211a565a5a5448b93e98ed56415255546f94
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Merge: 13bea0e e0c10ed
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Author: Christie Koehler &lt;ck@christi3k.net&gt;
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Date:   Mon Oct 10 13:25:51 2016 -0700
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic></span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-style:italic>    Merge branch &#39;master&#39; of https://github.com/NeuroDesk/neurocontainer
</span></span></span></code></pre></div><p>Some graphical Git clients may also create merge commits.</p><p>To undo a merge commit, first run <code>git reflog</code> to identify the commit you want
to roll back to:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#8f5902>$</span> git reflog
</span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-style:italic>e5f8211 HEAD@{0}: pull upstream master: Merge made by the &#39;recursive&#39; strategy.
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>13bea0e HEAD@{1}: commit: test commit for docs.
</span></span></span></code></pre></div><p>Reflog output will be long. The most recent Git refs will be listed at the top.
In the example above <code>e5f8211 HEAD@{0}:</code> is the merge commit made automatically
by <code>git pull</code> and <code>13bea0e HEAD@{1}:</code> is the last commit I made before running
<code>git pull</code>, the commit that I want to rollback to.</p><p>Once you&rsquo;d identified the ref you want to revert to, you can do so with <a href=https://git-scm.com/docs/git-reset>git
reset</a>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#8f5902>$</span> git reset --hard 13bea0e
</span></span><span style=display:flex><span><span style=color:#000;font-style:italic>HEAD is now at 13bea0e test commit for docs.
</span></span></span></code></pre></div><p>:::{important}
<code>git reset --hard &lt;commit></code> will discard all changes in your
working directory and index since the commit you&rsquo;re resetting to with
<code>&lt;commit></code>. <em>This is the main way you can lose work in Git</em>. If you need
to keep any changes that are in your working directory or that you have
committed, use <code>git reset --merge &lt;commit></code> instead.
:::</p><p>You can also use the relative reflog <code>HEAD@{1}</code> instead of the commit hash,
just keep in mind that this changes as you run Git commands.</p><p>Now when you look at the output of <code>git reflog</code>, you should see that the tip of your branch points to your
last commit <code>13bea0e</code> before the merge:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#8f5902>$</span> git reflog
</span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-style:italic>13bea0e HEAD@{2}: reset: moving to HEAD@{1}
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>e5f8211 HEAD@{3}: pull upstream master: Merge made by the &#39;recursive&#39; strategy.
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>13bea0e HEAD@{4}: commit: test commit for docs.
</span></span></span></code></pre></div><p>And the first entry <code>git log</code> shows is this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#000;font-style:italic>commit 13bea0e40197b1670e927a9eb05aaf50df9e8277
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Author: Christie Koehler &lt;ck@christi3k.net&gt;
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Date:   Mon Oct 10 13:25:38 2016 -0700
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic></span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-style:italic>    test commit for docs.
</span></span></span></code></pre></div><h2 id=restore-a-lost-commit>Restore a lost commit</h2><p>We&rsquo;ve mentioned you can use <code>git reset --hard</code> to rollback to a previous
commit. What if you run <code>git reset --hard</code> and then realize you actually need
one or more of the commits you just discarded? No problem, you can restore them
with <code>git cherry-pick</code> (<a href=https://git-scm.com/docs/git-cherry-pick>docs</a>).</p><p>For example, let&rsquo;s say you just committed &ldquo;some work&rdquo; and your <code>git log</code> looks
like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#000;font-style:italic>* 67aea58 (HEAD -&gt; master) some work
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>* 13bea0e test commit for docs.
</span></span></span></code></pre></div><p>You then mistakenly run <code>git reset --hard 13bea0e</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#8f5902>$</span> git reset --hard 13bea0e
</span></span><span style=display:flex><span><span style=color:#000;font-style:italic>HEAD is now at 13bea0e test commit for docs.
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic></span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902>$</span> git log
</span></span><span style=display:flex><span><span style=color:#000;font-style:italic>* 13bea0e (HEAD -&gt; master) test commit for docs.
</span></span></span></code></pre></div><p>And then realize you actually needed to keep commit 67aea58. First, use
<code>git reflog</code> to confirm that commit you want to restore and then run
<code>git cherry-pick &lt;commit></code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#8f5902>$</span> git reflog
</span></span><span style=display:flex><span><span style=color:#000;font-style:italic>13bea0e HEAD@{0}: reset: moving to 13bea0e
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>67aea58 HEAD@{1}: commit: some work
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic></span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902>$</span> git cherry-pick 67aea58
</span></span><span style=display:flex><span><span style=color:#000;font-style:italic> [master 67aea58] some work
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic> Date: Thu Oct 13 11:51:19 2016 -0700
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic> 1 file changed, 1 insertion(+)
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic> create mode 100644 test4.txt
</span></span></span></code></pre></div><h2 id=recover-from-a-git-rebase-failure>Recover from a <code>git rebase</code> failure</h2><p>One situation in which <code>git rebase</code> will fail and require you to intervene is
when your change, which Git will try to re-apply on top of new commits from
which ever branch you are rebasing on top of, is to code that has been changed
by those new commits.</p><p>For example, while I&rsquo;m working on a file, another contributor makes a change to
that file, submits a pull request and has their code merged into <code>master</code>.
Usually this is not a problem, but in this case the other contributor made a
change to a part of the file I also want to change. When I try to bring my
branch up to date with <code>git fetch</code> and then <code>git rebase upstream/master</code>, I see
the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#000;font-style:italic>First, rewinding head to replay your work on top of it...
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Applying: test change for docs
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Using index info to reconstruct a base tree...
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>M    README.md
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Falling back to patching base and 3-way merge...
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Auto-merging README.md
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>CONFLICT (content): Merge conflict in README.md
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>error: Failed to merge in the changes.
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Patch failed at 0001 test change for docs
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>The copy of the patch that failed is found in: .git/rebase-apply/patch
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic></span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-style:italic>When you have resolved this problem, run &#34;git rebase --continue&#34;.
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>If you prefer to skip this patch, run &#34;git rebase --skip&#34; instead.
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>To check out the original branch and stop rebasing, run &#34;git rebase --abort&#34;.
</span></span></span></code></pre></div><p>This message tells me that Git was not able to apply my changes to README.md
after bringing in the new commits from upstream/master.</p><p>Running <code>git status</code> also gives me some information:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#000;font-style:italic>rebase in progress; onto 5ae56e6
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>You are currently rebasing branch &#39;docs-test&#39; on &#39;5ae56e6&#39;.
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>  (fix conflicts and then run &#34;git rebase --continue&#34;)
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>  (use &#34;git rebase --skip&#34; to skip this patch)
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>  (use &#34;git rebase --abort&#34; to check out the original branch)
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic></span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-style:italic>Unmerged paths:
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>  (use &#34;git reset HEAD &lt;file&gt;...&#34; to unstage)
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>  (use &#34;git add &lt;file&gt;...&#34; to mark resolution)
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic></span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-style:italic>  both modified:   README.md
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic></span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-style:italic>no changes added to commit (use &#34;git add&#34; and/or &#34;git commit -a&#34;)
</span></span></span></code></pre></div><p>To fix, open all the files with conflicts in your editor and decide which edits
should be applied. Git uses standard conflict-resolution (<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>, <code>=======</code>,
and <code>>>>>>>></code>) markers to indicate where in files there are conflicts.</p><p>Tip: You can see recent changes made to a file by running the following
commands:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git fetch upstream
</span></span><span style=display:flex><span>git log -p upstream/master -- /path/to/file
</span></span></code></pre></div><p>You can use this to compare the changes that you have made to a file with the
ones in upstream, helping you avoid undoing changes from a previous commit when
you are rebasing.</p><p>Once you&rsquo;ve done that, save the file(s), stage them with <code>git add</code> and then
continue the rebase with <code>git rebase --continue</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#8f5902>$</span> git add README.md
</span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902>$</span> git rebase --continue
</span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Applying: test change for docs
</span></span></span></code></pre></div><p>For help resolving merge conflicts, see <a href=https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging#Basic-Merge-Conflicts>basic merge
conflicts</a>, <a href=https://git-scm.com/book/en/v2/Git-Tools-Advanced-Merging#_advanced_merging>advanced
merging</a>, and/or GitHub&rsquo;s help on <a href=https://help.github.com/en/articles/resolving-a-merge-conflict-using-the-command-line>how to resolve a
merge conflict</a>.</p><h2 id=working-from-multiple-computers>Working from multiple computers</h2><p>Working from multiple computers with neurocontainer and Git is fine, but you&rsquo;ll need to
pay attention and do a bit of work to ensure all of your work is readily
available.</p><p>Recall that most Git operations are local. When you commit your changes with
<code>git commit</code> they are safely stored in your <em>local</em> Git database only. That is,
until you <em>push</em> the commits to GitHub, they are only available on the computer
where you committed them.</p><p>So, before you stop working for the day, or before you switch computers, push
all of your commits to GitHub with <code>git push</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#8f5902>$</span> git push origin &lt;branchname&gt;
</span></span></code></pre></div><p>When you first start working on a new computer, you&rsquo;ll <a href=../cloning#step-1b-clone-to-your-machine>clone the neurocontainer
repository</a> and <a href=../cloning#step-1c-connect-your-fork-to-neurocontainers-upstream>connect it to neurocontainer
upstream</a>. A clone retrieves all current commits,
including the ones you pushed to GitHub from your other computer.</p><p>But if you&rsquo;re switching to another computer on which you have already cloned
neurocontainer, you need to update your local Git database with new refs from your
GitHub fork. You do this with <code>git fetch</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#8f5902>$</span> git fetch &lt;username&gt;
</span></span></code></pre></div><p>Ideally you should do this before you have made any commits on the same branch
on the second computer. Then you can <code>git merge</code> on whichever branch you need
to update:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#8f5902>$</span> git checkout &lt;my-branch&gt;
</span></span><span style=display:flex><span><span style=color:#000;font-style:italic>Switched to branch &#39;&lt;my-branch&gt;&#39;
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic></span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902>$</span> git merge origin/master
</span></span></code></pre></div><p><strong>If you have already made commits on the second computer that you need to
keep,</strong> you&rsquo;ll need to use <code>git log FETCH_HEAD</code> to identify that hashes of the
commits you want to keep and then <code>git cherry-pick &lt;commit></code> those commits into
whichever branch you need to update.</p><div class="text-muted mt-5 pt-3 border-top">Last modified
June 17, 2022
: <a href=https://github.com/NeuroDesk/neurodesk.github.io/commit/5c2ef6288f536d67f332e60c578daee63de89b11>Workaround to configure CVMFS in ubuntu 22.04 Update Singularity installation script Suggest Git workflow for multiple branch repositories like neurocontainers and QSMxT (5c2ef628)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label><a class=text-white target=_blank rel=noopener href aria-label><i></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/neuro_desk aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label><a class=text-white target=_blank rel=noopener href aria-label><i></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/NeuroDesk aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label><a class=text-white target=_blank rel=noopener href aria-label><i></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Dicussion Forum (requires github login)" aria-label="Dicussion Forum (requires github login)"><a class=text-white target=_blank rel=noopener href=https://github.com/NeuroDesk/neurodesk.github.io/discussions aria-label="Dicussion Forum (requires github login)"><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.2b242016bd393aa86ff3b4500b2baae3b55d65f622435861b9338518eb4a5f69.js integrity="sha256-KyQgFr05Oqhv87RQCyuq47VdZfYiQ1hhuTOFGOtKX2k=" crossorigin=anonymous></script>
<script src=/js/prism.js></script></body></html>